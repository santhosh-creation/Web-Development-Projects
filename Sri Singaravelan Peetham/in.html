<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sri Singaravelan Arulvakku Siddhar Peetham - Sulur | ‡Æ∏‡Øç‡Æ∞‡ØÄ ‡Æö‡Æø‡Æô‡Øç‡Æï‡Ææ‡Æ∞‡Æµ‡Øá‡Æ≤‡Æ©‡Øç ‡ÆÖ‡Æ∞‡ØÅ‡Æ≥‡Øç‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ ‡Æö‡Æø‡Æ§‡Øç‡Æ§‡Æ∞‡Øç ‡Æ™‡ØÄ‡Æü‡ÆÆ‡Øç - ‡Æö‡ØÇ‡Æ≤‡ØÇ‡Æ∞‡Øç</title>
  <meta name="description" content="Spiritual guidance, pooja services, life predictions, business advice, and social service. Book your consultation slot via WhatsApp and stay updated on events." />
  <meta property="og:title" content="Sri Singaravelan Arulvakku Siddhar Peetham - Sulur" />
  <meta property="og:description" content="Serene spiritual guidance and social service. Book slots on WhatsApp." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://images.unsplash.com/photo-1602672680880-47706bb2b0a5?q=80&w=1200&auto=format&fit=crop" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Noto+Sans+Tamil:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    /* ------------- Base + Theme ------------- */
    :root {
      --primary: #f59e0b;      /* saffron */
      --primary-2: #fbbf24;    /* golden */
      --accent: #7c3aed;       /* violet */
      --bg: #0b1020;
      --card: rgba(255,255,255,0.75);
      --text: #0f172a;
      --muted: #475569;
      --ring: rgba(245, 158, 11, 0.35);
      --radius: 16px;
      --shadow: 0 10px 30px rgba(2, 6, 23, 0.25);
    }
    [data-theme="dark"] {
      --card: rgba(22, 22, 31, 0.6);
      --text: #e5e7eb;
      --muted: #94a3b8;
      --bg: #0b1020;
      --shadow: 0 10px 30px rgba(0,0,0,0.45);
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body {
      font-family: Inter, "Noto Sans Tamil", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: var(--text);
      background:
        radial-gradient(60% 60% at 20% 20%, rgba(245,158,11,0.12), transparent 50%),
        radial-gradient(60% 60% at 80% 0%, rgba(124,58,237,0.12), transparent 50%),
        linear-gradient(180deg, #0b1020 0%, #0b1020 80%);
      min-height: 100vh;
      line-height: 1.5;
      overflow-x: hidden;
    }
    a { color: inherit; text-decoration: none; }
    img { max-width: 100%; display: block; }

    .container { width: min(1200px, 100%); margin: 0 auto; padding: 0 20px; }
    .section { padding: 72px 0; }
    .card {
      background: var(--card);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.18);
    }
    .btn {
      display: inline-flex; align-items: center; gap: 10px;
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      color: #1f2937; font-weight: 700; border: 0; cursor: pointer;
      padding: 12px 18px; border-radius: 999px; box-shadow: 0 8px 20px rgba(245,158,11,0.35);
      transition: transform .15s ease, box-shadow .2s ease;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 12px 26px rgba(245,158,11,0.45); }
    .btn.ghost {
      background: transparent; color: var(--text); border: 1px solid rgba(255,255,255,0.3);
      box-shadow: none;
    }
    .btn.icon { padding: 10px 12px; }

    .pill {
      display: inline-flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 999px;
      background: rgba(245, 158, 11, 0.14); color: #fbbf24; font-weight: 700; font-size: 12px; letter-spacing: 0.4px;
      border: 1px solid rgba(245,158,11,0.25);
    }

    /* ------------- Header ------------- */
    .topbar {
      font-size: 14px; color: #fff; background: linear-gradient(90deg, #7c3aed, #f59e0b);
      padding: 8px 0; position: relative; overflow: hidden;
    }
    .marquee { white-space: nowrap; animation: scroll 28s linear infinite; opacity: 0.95; }
    @keyframes scroll { 0% { transform: translateX(100%);} 100% { transform: translateX(-100%);} }

    header.nav {
      position: sticky; top: 0; z-index: 50; backdrop-filter: blur(10px);
      background: rgba(11,16,32,0.35); border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .nav-inner {
      display: flex; align-items: center; justify-content: space-between; gap: 16px; padding: 14px 0;
    }
    .brand { display: flex; align-items: center; gap: 12px; }
    .brand-logo {
      width: 42px; height: 42px; border-radius: 12px; background: radial-gradient(circle at 35% 35%, #fbbf24, #f59e0b);
      display: grid; place-items: center; color: #1f2937; font-weight: 900; box-shadow: var(--shadow);
    }
    .brand h1 { font-size: 16px; margin: 0; line-height: 1.2; font-weight: 800; color: #fff; }
    .brand small { display: block; font-weight: 500; opacity: 0.9; font-size: 12px; }

    .nav-links { display: flex; gap: 14px; align-items: center; flex-wrap: wrap; }
    .nav-links a {
      color: #e5e7eb; font-weight: 600; padding: 8px 10px; border-radius: 10px; transition: background .2s ease;
    }
    .nav-links a:hover { background: rgba(255,255,255,0.08); }
    .tools { display: flex; gap: 8px; align-items: center; }

    /* ------------- Hero Slider ------------- */
    .hero {
      position: relative; min-height: 74vh; display: grid; place-items: center; overflow: hidden;
    }
    .slides {
      position: absolute; inset: 0; z-index: 0;
    }
    .slide {
      position: absolute; inset: 0; background-size: cover; background-position: center;
      opacity: 0; transition: opacity 1.2s ease;
      filter: saturate(1.1) contrast(1.06) brightness(0.80);
    }
    .slide.active { opacity: 1; }
    .hero-content {
      position: relative; z-index: 1; text-align: center; max-width: 950px; padding: 24px; color: #fff;
    }
    .hero h2 { font-size: clamp(26px, 4vw, 46px); margin: 12px 0; line-height: 1.18; }
    .hero p.lead { font-size: clamp(16px, 1.6vw, 19px); opacity: 0.95; }

    /* ------------- Grid Cards ------------- */
    .grid { display: grid; gap: 20px; }
    .grid-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-2 { grid-template-columns: repeat(2, 1fr); }
    @media (max-width: 900px) { .grid-3 { grid-template-columns: 1fr 1fr; } }
    @media (max-width: 680px) { .grid-3, .grid-2 { grid-template-columns: 1fr; } }

    .service-card { padding: 22px; border-radius: var(--radius); }
    .service-card h3 { margin: 8px 0 6px; }
    .service-card p { color: var(--muted); margin: 0; }

    /* ------------- Booking ------------- */
    .form {
      display: grid; gap: 14px;
    }
    .row { display: grid; gap: 14px; grid-template-columns: 1fr 1fr; }
    @media (max-width: 680px) { .row { grid-template-columns: 1fr; } }
    label { font-weight: 700; font-size: 13px; color: var(--muted); }
    input, select, textarea {
      width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.65); color: #111827; font-size: 15px; outline: none;
      transition: box-shadow .15s ease, border-color .15s ease;
    }
    [data-theme="dark"] input, [data-theme="dark"] textarea, [data-theme="dark"] select {
      background: rgba(24, 26, 36, 0.7); color: #e5e7eb;
    }
    input:focus, textarea:focus, select:focus { box-shadow: 0 0 0 4px var(--ring); border-color: var(--primary); }
    .hint { font-size: 12px; color: var(--muted); }

    /* ------------- Events & Pooja ------------- */
    .list { display: grid; gap: 14px; }
    .event, .pooja-item {
      padding: 16px; border-radius: 14px; background: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.22);
    }
    [data-theme="dark"] .event, [data-theme="dark"] .pooja-item { background: rgba(24, 26, 36, 0.55); }
    .event h4 { margin: 0 0 8px; }
    .event .meta { font-size: 13px; color: var(--muted); display: flex; gap: 10px; flex-wrap: wrap; }

    /* ------------- Social Video ------------- */
    .video-wrap {
      position: relative; aspect-ratio: 16/9; border-radius: var(--radius); overflow: hidden; border: 1px solid rgba(255,255,255,0.2);
      background: #000;
    }
    .video-wrap iframe, .video-wrap video { width: 100%; height: 100%; display: block; }

    /* ------------- Contact ------------- */
    .contact-grid { display: grid; gap: 20px; grid-template-columns: 1.2fr 1.8fr; }
    @media (max-width: 900px) { .contact-grid { grid-template-columns: 1fr; } }
    .map { border-radius: var(--radius); overflow: hidden; border: 1px solid rgba(255,255,255,0.2); }

    /* ------------- Footer ------------- */
    footer { color: #cbd5e1; padding: 28px 0; border-top: 1px solid rgba(255,255,255,0.08); background: rgba(11,16,32,0.4); text-align: center; }

    /* ------------- Admin Panel ------------- */
    .admin-open { position: fixed; right: 18px; bottom: 18px; z-index: 50; }
    .modal {
      position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: none; align-items: center; justify-content: center; z-index: 70;
    }
    .modal.active { display: flex; }
    .admin-panel {
      width: min(980px, 95vw); max-height: 90vh; overflow: auto; padding: 18px; gap: 16px;
      display: grid; grid-template-columns: 260px 1fr; border-radius: 18px;
    }
    .admin-side { padding: 12px; }
    .admin-side h3 { margin-top: 8px; }
    .admin-nav { display: grid; gap: 10px; margin-top: 10px; }
    .admin-nav button {
      text-align: left; border-radius: 12px; border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.65); padding: 10px 12px; cursor: pointer; font-weight: 700;
    }
    [data-theme="dark"] .admin-nav button { background: rgba(24,26,36,0.7); color: #e5e7eb; }
    .admin-content { padding: 12px; display: grid; gap: 18px; }
    .admin-toolbar { display: flex; align-items: center; gap: 8px; justify-content: flex-end; }
    .admin-section { display: none; }
    .admin-section.active { display: grid; gap: 14px; }
    .danger {
      background: linear-gradient(135deg, #ef4444, #f97316); color: #fff; border: 0;
    }
    .import { display: inline-block; padding: 8px 12px; border-radius: 10px; border: 1px dashed rgba(255,255,255,0.3); }

    /* ------------- Utilities ------------- */
    .spacer-8 { height: 8px; }
    .spacer-16 { height: 16px; }
    .spacer-24 { height: 24px; }
    .center { text-align: center; }
    .muted { color: var(--muted); }
    .badge { display: inline-block; padding: 4px 8px; background: rgba(124,58,237,0.16); color: #c4b5fd; border-radius: 999px; font-size: 12px; border: 1px solid rgba(124,58,237,0.35); }
    .row-inline { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }

    /* ------------- Reduced Motion ------------- */
    @media (prefers-reduced-motion: reduce) {
      .slide { transition: none; }
      .marquee { animation: none; }
    }
  </style>
</head>
<body data-theme="auto">
  <!-- Announcement Top Bar (Editable in Admin) -->
  <div class="topbar">
    <div class="container">
      <div id="announcementMarquee" class="marquee">üôè Welcome | ‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç | Book your life prediction/consultation slot on WhatsApp: +91 9003356047 | ‡Æö‡ÆÆ‡ØÇ‡Æï ‡Æö‡Øá‡Æµ‡Øà: ‡Æ§‡Æø‡Æ©‡Æö‡Æ∞‡Æø ‡ÆÖ‡Æ©‡Øç‡Æ©‡Æ§‡Ææ‡Æ©‡ÆÆ‡Øç</div>
    </div>
  </div>

  <!-- Navigation -->
  <header class="nav">
    <div class="container nav-inner">
      <a href="#" class="brand" aria-label="Temple Home">
        <div class="brand-logo">‡•ê</div>
        <div>
          <h1>Sri Singaravelan Arulvakku Siddhar Peetham - Sulur</h1>
          <small>‡Æ∏‡Øç‡Æ∞‡ØÄ ‡Æö‡Æø‡Æô‡Øç‡Æï‡Ææ‡Æ∞‡Æµ‡Øá‡Æ≤‡Æ©‡Øç ‡ÆÖ‡Æ∞‡ØÅ‡Æ≥‡Øç‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ ‡Æö‡Æø‡Æ§‡Øç‡Æ§‡Æ∞‡Øç ‡Æ™‡ØÄ‡Æü‡ÆÆ‡Øç - ‡Æö‡ØÇ‡Æ≤‡ØÇ‡Æ∞‡Øç</small>
        </div>
      </a>
      <nav class="nav-links" aria-label="Primary">
        <a href="#home">Home</a>
        <a href="#services">Services</a>
        <a href="#booking">Book Slot</a>
        <a href="#events">Events</a>
        <a href="#social">Social Work</a>
        <a href="#contact">Contact</a>
        <a href="#admin" id="adminLink">Admin</a>
      </nav>
      <div class="tools">
        <button class="btn ghost icon" id="langToggle" aria-label="Toggle language">EN / ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
        <button class="btn ghost icon" id="themeToggle" aria-label="Toggle theme">üåó</button>
        <a class="btn" href="https://wa.me/9003356047" target="_blank" rel="noopener">WhatsApp</a>
      </div>
    </div>
  </header>

  <!-- Hero with Background Slider -->
  <section class="hero section" id="home" aria-label="Hero">
    <div class="slides" id="slides">
      <!-- Slides will be rendered from admin data; default seed images below -->
    </div>
    <div class="hero-content card">
      <span class="pill">Serene Guidance ‚Ä¢ Trust ‚Ä¢ Service</span>
      <h2 data-i18n="heroTitle">Divine guidance for life, business, and wellbeing</h2>
      <p class="lead" data-i18n="heroLead">
        Spiritual consultations with Arulvakku blessings, pooja services, and community care through food and financial support.
      </p>
      <div class="spacer-16"></div>
      <div class="row-inline center">
        <a class="btn" href="#booking">üìÖ Book a Consultation</a>
        <a class="btn ghost" href="#social">‚ù§Ô∏è Support Social Service</a>
      </div>
    </div>
  </section>

  <!-- Services -->
  <section class="section" id="services" aria-label="Services">
    <div class="container">
      <div class="center">
        <span class="badge" data-i18n="ourServices">Our Services</span>
        <h2 data-i18n="servicesTitle">Spiritual guidance, poojas, and community upliftment</h2>
        <p class="muted" data-i18n="servicesSub">
          Clear life predictions, mindful business advice, and poojas guided by tradition.
        </p>
      </div>
      <div class="spacer-24"></div>
      <div class="grid grid-3">
        <div class="service-card card">
          <div class="pill">üïØÔ∏è Pooja</div>
          <h3 data-i18n="svcPooja">Pooja Services & Special Homams</h3>
          <p data-i18n="svcPoojaDesc">Abhishekam, Archana, and dedicated offerings performed with devotion and care.</p>
        </div>
        <div class="service-card card">
          <div class="pill">üîÆ Guidance</div>
          <h3 data-i18n="svcLife">Life Predictions</h3>
          <p data-i18n="svcLifeDesc">Arulvakku-based insights to help you navigate decisions with faith and clarity.</p>
        </div>
        <div class="service-card card">
          <div class="pill">üíº Advice</div>
          <h3 data-i18n="svcBiz">Business Suggestions</h3>
          <p data-i18n="svcBizDesc">Practical, spiritually aligned advice for entrepreneurs and professionals.</p>
        </div>
        <div class="service-card card">
          <div class="pill">üçõ Annadhanam</div>
          <h3 data-i18n="svcFood">Food & Financial Assistance</h3>
          <p data-i18n="svcFoodDesc">Regular meals for those in need and support for urgent medical and education needs.</p>
        </div>
        <div class="service-card card">
          <div class="pill">üìÜ Schedule</div>
          <h3 data-i18n="svcSchedule">Consultation Days</h3>
          <p id="consultationDays">Thursday & Sunday: 6:00 PM ‚Äì 9:00 PM</p>
        </div>
        <div class="service-card card">
          <div class="pill">üôè Mission</div>
          <h3 data-i18n="svcMission">Our Mission</h3>
          <p data-i18n="svcMissionDesc">To serve with compassion, elevate with wisdom, and build a connected community.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Booking Slot (WhatsApp) -->
  <section class="section" id="booking" aria-label="Booking">
    <div class="container">
      <div class="grid grid-2">
        <div class="card" style="padding: 22px;">
          <span class="badge">WhatsApp Booking</span>
          <h3 data-i18n="bookTitle">Book your slot for life prediction / business guidance</h3>
          <p class="muted" data-i18n="bookSub">Fill your details and submit. WhatsApp will open with your message pre-filled.</p>
          <div class="spacer-16"></div>
          <form id="bookingForm" class="form" aria-label="Booking form">
            <div class="row">
              <div>
                <label for="name" data-i18n="name">Full Name</label>
                <input id="name" name="name" type="text" placeholder="Your name" required />
              </div>
              <div>
                <label for="date" data-i18n="date">Preferred Date</label>
                <input id="date" name="date" type="date" required />
              </div>
            </div>
            <div>
              <label for="purpose" data-i18n="purpose">Purpose</label>
              <select id="purpose" name="purpose" required>
                <option value="Life Prediction">Life Prediction</option>
                <option value="Business Suggestion">Business Suggestion</option>
                <option value="Pooja Booking">Pooja Booking</option>
                <option value="General Guidance">General Guidance</option>
              </select>
            </div>
            <div>
              <label for="notes" data-i18n="notes">Notes (optional)</label>
              <textarea id="notes" name="notes" rows="3" placeholder="Anything specific to share?"></textarea>
            </div>
            <span class="hint" data-i18n="bookHint">We will confirm your slot on WhatsApp based on availability.</span>
            <div class="row-inline">
              <button class="btn" type="submit">Send on WhatsApp</button>
              <a class="btn ghost" href="https://wa.me/9003356047" target="_blank" rel="noopener">Chat Now</a>
            </div>
          </form>
        </div>
        <div class="card" style="padding: 22px;">
          <h3 data-i18n="poojaTitle">Pooja Details</h3>
          <div id="poojaList" class="list">
            <!-- Pooja items from admin -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Events & Announcements -->
  <section class="section" id="events" aria-label="Events">
    <div class="container">
      <div class="row-inline">
        <span class="badge" data-i18n="eventsBadge">Events & Announcements</span>
      </div>
      <h3 data-i18n="eventsTitle">Upcoming events at the Peetham</h3>
      <div class="grid grid-2">
        <div class="card" style="padding: 22px;">
          <h4 data-i18n="upcoming">Upcoming Events</h4>
          <div id="eventsList" class="list"></div>
        </div>
        <div class="card" style="padding: 22px;">
          <h4 data-i18n="updates">Service Updates</h4>
          <div id="updatesList" class="list"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Social Service: New Social Work (Video) -->
  <section class="section" id="social" aria-label="Social Work">
    <div class="container">
      <div class="center">
        <span class="badge" data-i18n="socialBadge">Social Responsibility</span>
        <h3 data-i18n="socialTitle">New Social Work</h3>
        <p class="muted" data-i18n="socialSub">Watch our latest community initiative. Your support makes a difference.</p>
      </div>
      <div class="spacer-16"></div>
      <div class="video-wrap" id="socialVideoWrap">
        <!-- Admin-updatable video embed -->
        <iframe id="socialVideo" src="https://www.youtube.com/embed/2V-20Qe4M8Y" title="Social Work" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="spacer-8"></div>
      <div class="center muted" id="socialVideoCaption">Recent annadhanam drive serving 500+ people in Sulur.</div>
      <div class="spacer-16"></div>
      <div class="center">
        <a class="btn ghost" href="#contact">Contact for Donations</a>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section class="section" id="contact" aria-label="Contact">
    <div class="container">
      <div class="grid contact-grid">
        <div class="card" style="padding: 22px;">
          <h3 data-i18n="contactTitle">Contact</h3>
          <p class="muted" data-i18n="contactSub">We are here to help with guidance, poojas, and social support.</p>
          <div class="spacer-8"></div>
          <div class="list">
            <div class="pooja-item">
              <strong>WhatsApp</strong><br/>
              <a href="https://wa.me/9003356047" target="_blank" rel="noopener">+91 90033 56047</a>
            </div>
            <div class="pooja-item">
              <strong>Phone</strong><br/>
              <a href="tel:+919003356047">+91 90033 56047</a>
            </div>
            <div class="pooja-item">
              <strong data-i18n="location">Location</strong><br/>
              <span id="locationText">Sulur, Coimbatore, Tamil Nadu</span>
            </div>
          </div>
        </div>
        <div class="card map">
          <iframe id="mapEmbed" src="https://www.google.com/maps?q=Sulur,+Tamil+Nadu&output=embed" width="100%" height="100%" style="min-height: 360px;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div>¬© <span id="year"></span> Sri Singaravelan Arulvakku Siddhar Peetham - Sulur</div>
      <div class="spacer-8"></div>
      <div>Developed By SanStudio.</div>
    </div>
  </footer>

  <!-- Floating Admin Button (optional quick access) -->
  <button class="btn admin-open" id="openAdminBtn" title="Open Admin">‚öôÔ∏è Admin</button>

  <!-- Admin Modal -->
  <div class="modal" id="adminModal" aria-hidden="true" role="dialog" aria-label="Admin Panel Modal">
    <div class="admin-panel card">
      <div class="admin-side">
        <h3>Admin Panel</h3>
        <div class="muted">Password: 007124</div>
        <div class="spacer-16"></div>
        <div class="admin-nav">
          <button data-admin-section="slides">Background Slides</button>
          <button data-admin-section="pooja">Pooja Details</button>
          <button data-admin-section="events">Events</button>
          <button data-admin-section="updates">Service Updates</button>
          <button data-admin-section="social">Social Video</button>
          <button data-admin-section="contact">Contact & Map</button>
          <button data-admin-section="consultation">Consultation Days</button>
          <button data-admin-section="settings">Settings</button>
        </div>
      </div>
      <div class="admin-content">
        <div class="admin-toolbar">
          <button class="btn ghost" id="exportBtn">‚¨áÔ∏è Export</button>
          <label class="import">
            ‚¨ÜÔ∏è Import
            <input id="importInput" type="file" accept="application/json" style="display:none;" />
          </label>
          <button class="btn danger" id="resetBtn">Reset Data</button>
          <button class="btn" id="closeAdminBtn">Close</button>
        </div>

        <!-- Slides -->
        <div class="admin-section" id="section-slides">
          <h3>Background Slides</h3>
          <p class="muted">Add up to 5 high-quality image URLs. First image shows first.</p>
          <div id="slidesAdminList" class="list"></div>
          <div class="row">
            <input id="newSlideUrl" type="url" placeholder="Image URL" />
            <button class="btn" id="addSlideBtn">Add Slide</button>
          </div>
        </div>

        <!-- Pooja -->
        <div class="admin-section" id="section-pooja">
          <h3>Pooja Details</h3>
          <div id="poojaAdminList" class="list"></div>
          <div class="row">
            <input id="poojaTitleInput" type="text" placeholder="Title e.g., Abhishekam" />
            <input id="poojaTimeInput" type="text" placeholder="Time e.g., 6:00 AM" />
          </div>
          <textarea id="poojaDescInput" rows="3" placeholder="Description"></textarea>
          <div class="spacer-8"></div>
          <button class="btn" id="addPoojaBtn">Add Pooja</button>
        </div>

        <!-- Events -->
        <div class="admin-section" id="section-events">
          <h3>Events</h3>
          <div id="eventsAdminList" class="list"></div>
          <div class="row">
            <input id="eventTitleInput" type="text" placeholder="Event title" />
            <input id="eventDateInput" type="datetime-local" />
          </div>
          <textarea id="eventDescInput" rows="3" placeholder="Description"></textarea>
          <div class="spacer-8"></div>
          <button class="btn" id="addEventBtn">Add Event</button>
        </div>

        <!-- Updates -->
        <div class="admin-section" id="section-updates">
          <h3>Service Updates</h3>
          <div id="updatesAdminList" class="list"></div>
          <div class="row">
            <input id="updateTextInput" type="text" placeholder="Update text" />
            <select id="updateActiveInput">
              <option value="true">Active</option>
              <option value="false">Inactive</option>
            </select>
          </div>
          <button class="btn" id="addUpdateBtn">Add Update</button>
        </div>

        <!-- Social -->
        <div class="admin-section" id="section-social">
          <h3>Social Video</h3>
          <input id="socialVideoUrlInput" type="url" placeholder="YouTube link or MP4 URL" />
          <input id="socialVideoCaptionInput" type="text" placeholder="Short caption" />
          <div class="spacer-8"></div>
          <button class="btn" id="saveSocialBtn">Save Video</button>
          <p class="muted">Tip: Use a direct YouTube link like https://www.youtube.com/watch?v=VIDEO_ID</p>
        </div>

        <!-- Contact -->
        <div class="admin-section" id="section-contact">
          <h3>Contact & Map</h3>
          <div class="row">
            <input id="contactPhoneInput" type="text" placeholder="Phone" />
            <input id="contactWhatsInput" type="text" placeholder="WhatsApp (digits only)" />
          </div>
          <input id="contactLocationInput" type="text" placeholder="Location text" />
          <input id="mapEmbedInput" type="url" placeholder="Google Maps Embed URL" />
          <div class="spacer-8"></div>
          <button class="btn" id="saveContactBtn">Save Contact</button>
        </div>

        <!-- Consultation Days -->
        <div class="admin-section" id="section-consultation">
          <h3>Consultation Days</h3>
          <input id="consultationDaysInput" type="text" placeholder="e.g., Thursday & Sunday: 6:00 PM ‚Äì 9:00 PM" />
          <div class="spacer-8"></div>
          <button class="btn" id="saveConsultationBtn">Save</button>
        </div>

        <!-- Settings -->
        <div class="admin-section" id="section-settings">
          <h3>Settings</h3>
          <div class="row">
            <select id="defaultLang">
              <option value="en">English</option>
              <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
            </select>
            <select id="defaultTheme">
              <option value="auto">Auto</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </div>
          <div class="spacer-8"></div>
          <button class="btn" id="saveSettingsBtn">Save Settings</button>
          <p class="muted">Note: This is a front‚Äëend only admin (for convenience). For multi-admin and secure access, use a backend later.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ----------------------- Data & Defaults -----------------------
    const LS_KEY = "ssasp_site_data_v1";
    const session = { admin: false };
    const DEFAULTS = {
      version: 1,
      settings: { lang: "en", theme: "auto" },
      announcement: "üôè Welcome | ‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç | Book your life prediction/consultation slot on WhatsApp: +91 9003356047 | ‡Æö‡ÆÆ‡ØÇ‡Æï ‡Æö‡Øá‡Æµ‡Øà: ‡Æ§‡Æø‡Æ©‡Æö‡Æ∞‡Æø ‡ÆÖ‡Æ©‡Øç‡Æ©‡Æ§‡Ææ‡Æ©‡ÆÆ‡Øç",
      slides: [
        "https://images.unsplash.com/photo-1552956284-05678515c176?q=80&w=1200&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1526738549149-8e07eca6c147?q=80&w=1200&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1548013146-72479768bada?q=80&w=1200&auto=format&fit=crop"
      ],
      poojas: [
        { id: uid(), title: "Abhishekam", time: "6:00 AM", desc: "Morning abhishekam with Vedic chants for prosperity." },
        { id: uid(), title: "Special Archana", time: "6:30 PM", desc: "Evening archana with devotees‚Äô name and nakshatra." },
        { id: uid(), title: "Homam (Monthly)", time: "Pournami", desc: "Dedicated homam for health, success, and peace." },
      ],
      events: [
        { id: uid(), title: "Aadi Special Pooja", date: nextDate(7).toISOString(), desc: "Auspicious Aadi month special pooja and prasadam." }
      ],
      updates: [
        { id: uid(), text: "Free annadhanam every Saturday 12 PM", active: true },
        { id: uid(), text: "Business guidance slots open for next week", active: true }
      ],
      social: {
        url: "https://www.youtube.com/watch?v=2V-20Qe4M8Y",
        caption: "Recent annadhanam drive serving 500+ people in Sulur."
      },
      contact: {
        phone: "+91 90033 56047",
        whatsapp: "9003356047",
        locationText: "Sulur, Coimbatore, Tamil Nadu",
        mapEmbed: "https://www.google.com/maps?q=Sulur,+Tamil+Nadu&output=embed"
      },
      consultationDays: "Thursday & Sunday: 6:00 PM ‚Äì 9:00 PM"
    };

    function uid() {
      return Math.random().toString(36).slice(2) + Date.now().toString(36).slice(4);
    }
    function nextDate(offsetDays = 1) {
      const d = new Date();
      d.setDate(d.getDate() + offsetDays);
      return d;
    }
    function loadData() {
      try {
        const raw = localStorage.getItem(LS_KEY);
        if (!raw) return { ...DEFAULTS };
        const data = JSON.parse(raw);
        // simple versioning hook
        return { ...DEFAULTS, ...data };
      } catch (e) {
        console.warn("Load data failed; using defaults.", e);
        return { ...DEFAULTS };
      }
    }
    function saveData() {
      localStorage.setItem(LS_KEY, JSON.stringify(DATA));
      renderAll();
    }

    let DATA = loadData();

    // ----------------------- i18n (EN/TA) -----------------------
    const I18N = {
      en: {
        heroTitle: "Divine guidance for life, business, and wellbeing",
        heroLead: "Spiritual consultations with Arulvakku blessings, pooja services, and community care through food and financial support.",
        ourServices: "Our Services",
        servicesTitle: "Spiritual guidance, poojas, and community upliftment",
        servicesSub: "Clear life predictions, mindful business advice, and poojas guided by tradition.",
        svcPooja: "Pooja Services & Special Homams",
        svcPoojaDesc: "Abhishekam, Archana, and dedicated offerings performed with devotion and care.",
        svcLife: "Life Predictions",
        svcLifeDesc: "Arulvakku-based insights to help you navigate decisions with faith and clarity.",
        svcBiz: "Business Suggestions",
        svcBizDesc: "Practical, spiritually aligned advice for entrepreneurs and professionals.",
        svcFood: "Food & Financial Assistance",
        svcFoodDesc: "Regular meals for those in need and support for urgent medical and education needs.",
        svcSchedule: "Consultation Days",
        svcMission: "Our Mission",
        svcMissionDesc: "To serve with compassion, elevate with wisdom, and build a connected community.",
        bookTitle: "Book your slot for life prediction / business guidance",
        bookSub: "Fill your details and submit. WhatsApp will open with your message pre-filled.",
        name: "Full Name",
        date: "Preferred Date",
        purpose: "Purpose",
        notes: "Notes (optional)",
        bookHint: "We will confirm your slot on WhatsApp based on availability.",
        poojaTitle: "Pooja Details",
        eventsBadge: "Events & Announcements",
        eventsTitle: "Upcoming events at the Peetham",
        upcoming: "Upcoming Events",
        updates: "Service Updates",
        socialBadge: "Social Responsibility",
        socialTitle: "New Social Work",
        socialSub: "Watch our latest community initiative. Your support makes a difference.",
        contactTitle: "Contact",
        contactSub: "We are here to help with guidance, poojas, and social support.",
        location: "Location"
      },
      ta: {
        heroTitle: "‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà, ‡Æ§‡Øä‡Æ¥‡Æø‡Æ≤‡Øç, ‡Æ®‡Æ≤‡Æ©‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡Æ§‡ØÜ‡ÆØ‡Øç‡Æµ‡ØÄ‡Æï ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç",
        heroLead: "‡ÆÖ‡Æ∞‡ØÅ‡Æ≥‡Øç‡Æµ‡Ææ‡Æï‡Øç‡Æï‡ØÅ ‡ÆÜ‡Æö‡ØÄ‡Æ∞‡Øç‡Æµ‡Ææ‡Æ§‡Æ§‡Øç‡Æ§‡ØÅ‡Æü‡Æ©‡Øç ‡ÆÜ‡Æ©‡Øç‡ÆÆ‡ØÄ‡Æï ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡Æï‡Æ≥‡Øç, ‡Æ™‡ØÇ‡Æú‡Øà ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç, ‡Æö‡ÆÆ‡ØÇ‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æâ‡Æ£‡Æµ‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ§‡Æø ‡Æâ‡Æ§‡Æµ‡Æø.",
        ourServices: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç",
        servicesTitle: "‡ÆÜ‡Æ©‡Øç‡ÆÆ‡ØÄ‡Æï ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç, ‡Æ™‡ØÇ‡Æú‡Øà ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æö‡ÆÆ‡ØÇ‡Æï ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Øá‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç",
        servicesSub: "‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æ§‡Øä‡Æ¥‡Æø‡Æ≤‡Øç ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà, ‡ÆÆ‡Æ∞‡Æ™‡ØÅ ‡Æµ‡Æ¥‡Æø ‡Æ™‡ØÇ‡Æú‡Øà‡Æï‡Æ≥‡Øç.",
        svcPooja: "‡Æ™‡ØÇ‡Æú‡Øà ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æö‡Æø‡Æ±‡Æ™‡Øç‡Æ™‡ØÅ ‡Æπ‡Øã‡ÆÆ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        svcPoojaDesc: "‡ÆÖ‡Æ™‡Æø‡Æ∑‡Øá‡Æï‡ÆÆ‡Øç, ‡ÆÖ‡Æ∞‡Øç‡Æö‡Øç‡Æö‡Æ©‡Øà ‡Æ™‡Øã‡Æ©‡Øç‡Æ±‡Æµ‡Øà ‡Æ™‡Æï‡Øç‡Æ§‡Æø‡ÆØ‡ØÅ‡Æü‡Æ©‡Øç ‡Æ®‡Æü‡Øà‡Æ™‡ØÜ‡Æ±‡ØÅ‡ÆÆ‡Øç.",
        svcLife: "‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ",
        svcLifeDesc: "‡ÆÖ‡Æ∞‡ØÅ‡Æ≥‡Øç‡Æµ‡Ææ‡Æï‡Øç‡Æï‡Æø‡Æ©‡Øç ‡Æµ‡Æ¥‡Æø ‡Æ§‡ØÜ‡Æ≥‡Æø‡Æµ‡Ææ‡Æ© ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç.",
        svcBiz: "‡Æ§‡Øä‡Æ¥‡Æø‡Æ≤‡Øç ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà",
        svcBizDesc: "‡ÆÜ‡Æ©‡Øç‡ÆÆ‡ØÄ‡Æï‡Æ§‡Øç‡Æ§‡ØÅ‡Æü‡Æ©‡Øç ‡Æí‡Æ§‡Øç‡Æ§‡ØÅ‡Æ™‡Øç‡Æ™‡Øã‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æü‡Øà‡ÆÆ‡ØÅ‡Æ±‡Øà ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà‡Æï‡Æ≥‡Øç.",
        svcFood: "‡Æâ‡Æ£‡Æµ‡ØÅ & ‡Æ®‡Æø‡Æ§‡Æø ‡Æâ‡Æ§‡Æµ‡Æø",
        svcFoodDesc: "‡Æ§‡Øá‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æµ‡Øã‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æâ‡Æ£‡Æµ‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Æ≥‡Øç.",
        svcSchedule: "‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Æ≥‡Øç",
        svcMission: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Øã‡Æï‡Øç‡Æï‡ÆÆ‡Øç",
        svcMissionDesc: "‡Æï‡Æ∞‡ØÅ‡Æ£‡Øà‡ÆØ‡ØÅ‡Æü‡Æ©‡Øç ‡Æö‡Øá‡Æµ‡Øà, ‡Æû‡Ææ‡Æ©‡Æ§‡Øç‡Æ§‡Ææ‡Æ≤‡Øç ‡Æâ‡ÆØ‡Æ∞‡Øç‡Æµ‡ØÅ, ‡Æí‡Æ©‡Øç‡Æ±‡ØÅ‡Æ™‡Æü‡Øç‡Æü ‡Æö‡ÆÆ‡ØÇ‡Æï‡ÆÆ‡Øç.",
        bookTitle: "‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà/‡Æ§‡Øä‡Æ¥‡Æø‡Æ≤‡Øç ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà ‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç",
        bookSub: "‡Æ§‡Æï‡Æµ‡Æ≤‡Øç ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡Æø ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æµ‡Ææ‡Æü‡Øç‡Æ∏‡Øç‡ÆÖ‡Æ™‡Øç‡Æ™‡Æø‡Æ≤‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æø ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï ‡Æ§‡Æø‡Æ±‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç.",
        name: "‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç",
        date: "‡Æ§‡Øá‡Æ§‡Æø",
        purpose: "‡Æ®‡Øã‡Æï‡Øç‡Æï‡ÆÆ‡Øç",
        notes: "‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç (‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡Æø‡Æ©‡Øç)",
        bookHint: "‡Æï‡Æø‡Æü‡Øà‡Æ™‡Øç‡Æ™‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æè‡Æ±‡Øç‡Æ™ ‡Æµ‡Ææ‡Æü‡Øç‡Æ∏‡Øç‡ÆÖ‡Æ™‡Øç‡Æ™‡Æø‡Æ≤‡Øç ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç.",
        poojaTitle: "‡Æ™‡ØÇ‡Æú‡Øà ‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        eventsBadge: "‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø‡Æï‡Æ≥‡Øç & ‡ÆÖ‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç",
        eventsTitle: "‡Æ™‡ØÄ‡Æü‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æ®‡Æü‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø‡Æï‡Æ≥‡Øç",
        upcoming: "‡Æµ‡Æ∞‡Æµ‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø‡Æï‡Æ≥‡Øç",
        updates: "‡Æö‡Øá‡Æµ‡Øà ‡ÆÖ‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç",
        socialBadge: "‡Æö‡ÆÆ‡ØÇ‡Æï ‡Æ™‡Øä‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ",
        socialTitle: "‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æö‡ÆÆ‡ØÇ‡Æï‡Æ™‡Øç ‡Æ™‡Æ£‡Æø‡Æï‡Æ≥‡Øç",
        socialSub: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡ÆÆ‡ØÄ‡Æ™‡Æ§‡Øç‡Æ§‡Æø‡ÆØ ‡Æö‡ÆÆ‡ØÇ‡Æï ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡ÆØ‡Øà‡Æï‡Øç ‡Æï‡Ææ‡Æ£‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
        contactTitle: "‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ",
        contactSub: "‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æ≤‡Øç, ‡Æ™‡ØÇ‡Æú‡Øà, ‡Æö‡ÆÆ‡ØÇ‡Æï ‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡Ææ‡Æï ‡Æé‡Æ®‡Øç‡Æ®‡Øá‡Æ∞‡ÆÆ‡ØÅ‡ÆÆ‡Øç.",
        location: "‡Æá‡Æü‡ÆÆ‡Øç"
      }
    };
    function t(key) {
      const lang = DATA.settings?.lang || "en";
      return I18N[lang]?.[key] || I18N.en[key] || key;
    }
    function applyI18n() {
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        el.textContent = t(key);
      });
      document.documentElement.lang = DATA.settings.lang || "en";
    }

    // ----------------------- Theme -----------------------
    function applyTheme() {
      let theme = DATA.settings?.theme || "auto";
      if (theme === "auto") {
        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        document.body.setAttribute("data-theme", prefersDark ? "dark" : "light");
      } else {
        document.body.setAttribute("data-theme", theme);
      }
    }

    // ----------------------- Renderers -----------------------
    function renderSlides() {
      const wrap = document.getElementById("slides");
      wrap.innerHTML = "";
      const slides = DATA.slides?.slice(0,5) || [];
      if (!slides.length) return;
      slides.forEach((url, idx) => {
        const d = document.createElement("div");
        d.className = "slide" + (idx === 0 ? " active":"");
        d.style.backgroundImage = `url('${url}')`;
        d.setAttribute("role", "img");
        d.setAttribute("aria-label", "Background image " + (idx+1));
        wrap.appendChild(d);
      });
      startSlider();
    }
    let sliderTimer = null;
    function startSlider() {
      if (sliderTimer) { clearInterval(sliderTimer); sliderTimer = null; }
      const nodes = Array.from(document.querySelectorAll(".slide"));
      if (nodes.length < 2) return;
      let i = 0;
      sliderTimer = setInterval(() => {
        nodes[i].classList.remove("active");
        i = (i + 1) % nodes.length;
        nodes[i].classList.add("active");
      }, 5500);
    }

    function renderPoojas() {
      const list = document.getElementById("poojaList");
      list.innerHTML = "";
      (DATA.poojas || []).forEach(p => {
        const d = document.createElement("div");
        d.className = "pooja-item";
        d.innerHTML = `<strong>${escapeHtml(p.title)}</strong> ‚Ä¢ <em>${escapeHtml(p.time)}</em><br/><span class="muted">${escapeHtml(p.desc || "")}</span>`;
        list.appendChild(d);
      });
    }

    function renderEvents() {
      const list = document.getElementById("eventsList");
      const updatesList = document.getElementById("updatesList");
      list.innerHTML = "";
      updatesList.innerHTML = "";

      (DATA.events || [])
        .slice()
        .sort((a,b) => new Date(a.date) - new Date(b.date))
        .forEach(ev => {
          const d = document.createElement("div");
          d.className = "event";
          const dt = new Date(ev.date);
          d.innerHTML = `
            <h4>${escapeHtml(ev.title)}</h4>
            <div class="meta">üóìÔ∏è ${dt.toLocaleString()} <a href="${icsLink(ev)}" download="${slug(ev.title)}.ics" class="btn ghost icon">+ Calendar</a></div>
            <div class="muted">${escapeHtml(ev.desc || "")}</div>
          `;
          list.appendChild(d);
        });

      (DATA.updates || []).forEach(u => {
        const d = document.createElement("div");
        d.className = "event";
        d.innerHTML = `<div>${escapeHtml(u.text)}</div><div class="muted">${u.active ? "Active" : "Inactive"}</div>`;
        updatesList.appendChild(d);
      });

      // announcement marquee
      const marquee = document.getElementById("announcementMarquee");
      marquee.textContent = DATA.announcement || DEFAULTS.announcement;
    }

    function renderSocial() {
      const { url, caption } = DATA.social || {};
      const frame = document.getElementById("socialVideo");
      const cap = document.getElementById("socialVideoCaption");
      const wrap = document.getElementById("socialVideoWrap");
      cap.textContent = caption || "";
      if (!url) { wrap.innerHTML = '<div style="color:#fff;display:grid;place-items:center;height:100%;">No video</div>'; return; }
      if (url.includes("youtube.com") || url.includes("youtu.be")) {
        const id = parseYouTubeId(url);
        frame.src = `https://www.youtube.com/embed/${id}`;
        if (!frame.parentNode) {
          wrap.innerHTML = "";
          wrap.appendChild(frame);
        }
      } else if (url.endsWith(".mp4")) {
        wrap.innerHTML = `<video controls src="${escapeHtml(url)}"></video>`;
      } else {
        wrap.innerHTML = `<iframe src="${escapeHtml(url)}" frameborder="0" allowfullscreen></iframe>`;
      }
    }

    function renderContact() {
      const c = DATA.contact || DEFAULTS.contact;
      const phoneEl = document.querySelector('#contact [href^="tel:"]');
      const waEl = document.querySelector('#contact [href^="https://wa.me"]');
      const locEl = document.getElementById("locationText");
      const mapEl = document.getElementById("mapEmbed");
      phoneEl.textContent = c.phone || "";
      phoneEl.href = "tel:" + (c.phone || "").replace(/\s+/g, "");
      waEl.textContent = "+91 " + (c.whatsapp || "9003356047").replace(/(\d{5})(\d{5})/, "$1 $2");
      waEl.href = "https://wa.me/" + (c.whatsapp || "9003356047");
      locEl.textContent = c.locationText || "";
      mapEl.src = c.mapEmbed || DEFAULTS.contact.mapEmbed;

      const cons = document.getElementById("consultationDays");
      cons.textContent = DATA.consultationDays || DEFAULTS.consultationDays;
    }

    function renderYear() {
      document.getElementById("year").textContent = new Date().getFullYear();
    }

    function renderAll() {
      applyTheme();
      applyI18n();
      renderSlides();
      renderPoojas();
      renderEvents();
      renderSocial();
      renderContact();
      renderYear();
      hydrateAdminLists();
    }

    // ----------------------- Booking Form -----------------------
    const bookingForm = document.getElementById("bookingForm");
    const dateInput = document.getElementById("date");
    dateInput.min = new Date().toISOString().split("T")[0];

    bookingForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const date = document.getElementById("date").value;
      const purpose = document.getElementById("purpose").value;
      const notes = document.getElementById("notes").value.trim();
      if (!name || !date || !purpose) return;
      const msg = `Namaste. I would like to book a slot.\n\nName: ${name}\nDate: ${date}\nPurpose: ${purpose}${notes ? `\nNotes: ${notes}` : ""}\n\nThank you.`;
      const wa = DATA.contact?.whatsapp || "9003356047";
      const link = `https://wa.me/${wa}?text=${encodeURIComponent(msg)}`;
      window.open(link, "_blank", "noopener");
    });

    // ----------------------- Admin Auth -----------------------
    function requireAdmin() {
      if (session.admin) return true;
      const pass = prompt("Enter Admin Password:");
      if (pass === "007124") {
        session.admin = true;
        sessionStorage.setItem("ssasp_admin", "1");
        return true;
      } else if (pass !== null) {
        alert("Incorrect password");
        return false;
      }
      return false;
    }
    (function restoreAdminSession() {
      if (sessionStorage.getItem("ssasp_admin") === "1") session.admin = true;
    })();

    document.getElementById("adminLink").addEventListener("click", (e) => {
      e.preventDefault();
      if (!requireAdmin()) return;
      openAdmin();
    });
    document.getElementById("openAdminBtn").addEventListener("click", () => {
      if (!requireAdmin()) return;
      openAdmin();
    });

    const modal = document.getElementById("adminModal");
    function openAdmin() {
      modal.classList.add("active");
      modal.setAttribute("aria-hidden", "false");
      showAdminSection("slides");
    }
    function closeAdmin() {
      modal.classList.remove("active");
      modal.setAttribute("aria-hidden", "true");
    }
    document.getElementById("closeAdminBtn").addEventListener("click", closeAdmin);
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeAdmin();
    });

    // Admin Nav
    document.querySelectorAll(".admin-nav button").forEach(btn => {
      btn.addEventListener("click", () => showAdminSection(btn.dataset.adminSection));
    });
    function showAdminSection(id) {
      document.querySelectorAll(".admin-section").forEach(s => s.classList.remove("active"));
      document.getElementById("section-" + id).classList.add("active");
    }

    // Admin Lists Hydration
    function hydrateAdminLists() {
      // Slides
      const slidesList = document.getElementById("slidesAdminList");
      slidesList.innerHTML = "";
      (DATA.slides || []).forEach((url, idx) => {
        const row = document.createElement("div");
        row.className = "event";
        row.innerHTML = `
          <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
            <img src="${escapeHtml(url)}" style="width:72px;height:48px;object-fit:cover;border-radius:8px;" alt="slide ${idx+1}" />
            <input type="url" value="${escapeHtml(url)}" style="flex:1; min-width:180px;"/>
            <button class="btn ghost icon" data-move="-1">‚¨ÜÔ∏è</button>
            <button class="btn ghost icon" data-move="1">‚¨áÔ∏è</button>
            <button class="btn danger" data-remove="1">Remove</button>
          </div>
        `;
        slidesList.appendChild(row);
        const input = row.querySelector("input");
        input.addEventListener("change", () => {
          DATA.slides[idx] = input.value.trim();
          saveData();
        });
        row.querySelector("[data-remove]").addEventListener("click", () => {
          DATA.slides.splice(idx,1);
          saveData();
        });
        row.querySelector("[data-move='-1']").addEventListener("click", () => {
          if (idx === 0) return;
          const temp = DATA.slides[idx-1]; DATA.slides[idx-1] = DATA.slides[idx]; DATA.slides[idx] = temp;
          saveData();
        });
        row.querySelector("[data-move='1']").addEventListener("click", () => {
          if (idx === DATA.slides.length - 1) return;
          const temp = DATA.slides[idx+1]; DATA.slides[idx+1] = DATA.slides[idx]; DATA.slides[idx] = temp;
          saveData();
        });
      });

      // Pooja
      const poojaList = document.getElementById("poojaAdminList");
      poojaList.innerHTML = "";
      (DATA.poojas || []).forEach(p => {
        const row = document.createElement("div");
        row.className = "event";
        row.innerHTML = `
          <div class="row">
            <input value="${escapeHtml(p.title)}"/>
            <input value="${escapeHtml(p.time)}"/>
          </div>
          <textarea rows="2">${escapeHtml(p.desc || "")}</textarea>
          <div class="row-inline">
            <button class="btn ghost icon" data-save="${p.id}">Save</button>
            <button class="btn danger" data-del="${p.id}">Delete</button>
          </div>
        `;
        const [titleEl, timeEl] = row.querySelectorAll("input");
        const descEl = row.querySelector("textarea");
        row.querySelector("[data-save]").addEventListener("click", () => {
          p.title = titleEl.value.trim();
          p.time = timeEl.value.trim();
          p.desc = descEl.value.trim();
          saveData();
        });
        row.querySelector("[data-del]").addEventListener("click", () => {
          DATA.poojas = DATA.poojas.filter(x => x.id !== p.id);
          saveData();
        });
        poojaList.appendChild(row);
      });

      // Events
      const eventsList = document.getElementById("eventsAdminList");
      eventsList.innerHTML = "";
      (DATA.events || []).forEach(ev => {
        const row = document.createElement("div");
        row.className = "event";
        row.innerHTML = `
          <input value="${escapeHtml(ev.title)}"/>
          <div class="spacer-8"></div>
          <input type="datetime-local" value="${toLocalDatetime(ev.date)}"/>
          <div class="spacer-8"></div>
          <textarea rows="2">${escapeHtml(ev.desc || "")}</textarea>
          <div class="spacer-8"></div>
          <div class="row-inline">
            <button class="btn ghost icon" data-save="${ev.id}">Save</button>
            <button class="btn danger" data-del="${ev.id}">Delete</button>
          </div>
        `;
        const inputs = row.querySelectorAll("input,textarea");
        row.querySelector("[data-save]").addEventListener("click", () => {
          ev.title = inputs[0].value.trim();
          ev.date = new Date(inputs[1].value).toISOString();
          ev.desc = inputs[2].value.trim();
          saveData();
        });
        row.querySelector("[data-del]").addEventListener("click", () => {
          DATA.events = DATA.events.filter(x => x.id !== ev.id);
          saveData();
        });
        eventsList.appendChild(row);
      });

      // Updates
      const updatesList = document.getElementById("updatesAdminList");
      updatesList.innerHTML = "";
      (DATA.updates || []).forEach(u => {
        const row = document.createElement("div");
        row.className = "event";
        row.innerHTML = `
          <input value="${escapeHtml(u.text)}" />
          <select>
            <option value="true"${u.active ? " selected":""}>Active</option>
            <option value="false"${!u.active ? " selected":""}>Inactive</option>
          </select>
          <div class="row-inline">
            <button class="btn ghost icon" data-save="${u.id}">Save</button>
            <button class="btn danger" data-del="${u.id}">Delete</button>
          </div>
        `;
        const [textEl, selEl] = row.querySelectorAll("input, select");
        row.querySelector("[data-save]").addEventListener("click", () => {
          u.text = textEl.value.trim();
          u.active = selEl.value === "true";
          saveData();
        });
        row.querySelector("[data-del]").addEventListener("click", () => {
          DATA.updates = DATA.updates.filter(x => x.id !== u.id);
          saveData();
        });
        updatesList.appendChild(row);
      });

      // Announcement text in topbar (editable via first update? keep as global)
      // We'll bind announcement to updates section header:
      const annWrap = document.getElementById("section-updates");
      if (annWrap && !annWrap.querySelector("#announcementInput")) {
        const lbl = document.createElement("div");
        lbl.innerHTML = `
          <div class="spacer-8"></div>
          <h4>Top Announcement (Marquee)</h4>
          <input id="announcementInput" type="text" placeholder="Announcement marquee text" />
          <div class="spacer-8"></div>
          <button class="btn" id="saveAnnouncementBtn">Save Announcement</button>
        `;
        annWrap.appendChild(lbl);
        const input = lbl.querySelector("#announcementInput");
        input.value = DATA.announcement || DEFAULTS.announcement;
        lbl.querySelector("#saveAnnouncementBtn").addEventListener("click", () => {
          DATA.announcement = input.value.trim();
          saveData();
        });
      }
    }

    // Admin Actions
    document.getElementById("addSlideBtn").addEventListener("click", () => {
      const url = document.getElementById("newSlideUrl").value.trim();
      if (!url) return;
      DATA.slides = DATA.slides || [];
      DATA.slides.push(url);
      document.getElementById("newSlideUrl").value = "";
      saveData();
    });
    document.getElementById("addPoojaBtn").addEventListener("click", () => {
      const title = document.getElementById("poojaTitleInput").value.trim();
      const time = document.getElementById("poojaTimeInput").value.trim();
      const desc = document.getElementById("poojaDescInput").value.trim();
      if (!title || !time) return;
      DATA.poojas.push({ id: uid(), title, time, desc });
      document.getElementById("poojaTitleInput").value = "";
      document.getElementById("poojaTimeInput").value = "";
      document.getElementById("poojaDescInput").value = "";
      saveData();
    });
    document.getElementById("addEventBtn").addEventListener("click", () => {
      const title = document.getElementById("eventTitleInput").value.trim();
      const date = document.getElementById("eventDateInput").value;
      const desc = document.getElementById("eventDescInput").value.trim();
      if (!title || !date) return;
      DATA.events.push({ id: uid(), title, date: new Date(date).toISOString(), desc });
      document.getElementById("eventTitleInput").value = "";
      document.getElementById("eventDateInput").value = "";
      document.getElementById("eventDescInput").value = "";
      saveData();
    });
    document.getElementById("addUpdateBtn").addEventListener("click", () => {
      const text = document.getElementById("updateTextInput").value.trim();
      const active = document.getElementById("updateActiveInput").value === "true";
      if (!text) return;
      DATA.updates.push({ id: uid(), text, active });
      document.getElementById("updateTextInput").value = "";
      document.getElementById("updateActiveInput").value = "true";
      saveData();
    });
    document.getElementById("saveSocialBtn").addEventListener("click", () => {
      const url = document.getElementById("socialVideoUrlInput").value.trim();
      const caption = document.getElementById("socialVideoCaptionInput").value.trim();
      DATA.social = { url, caption };
      saveData();
    });
    document.getElementById("saveContactBtn").addEventListener("click", () => {
      const phone = document.getElementById("contactPhoneInput").value.trim();
      const whatsapp = document.getElementById("contactWhatsInput").value.trim() || "9003356047";
      const locationText = document.getElementById("contactLocationInput").value.trim();
      const mapEmbed = document.getElementById("mapEmbedInput").value.trim();
      DATA.contact = { phone, whatsapp, locationText, mapEmbed };
      saveData();
    });
    document.getElementById("saveConsultationBtn").addEventListener("click", () => {
      const txt = document.getElementById("consultationDaysInput").value.trim();
      if (txt) { DATA.consultationDays = txt; saveData(); }
    });
    document.getElementById("saveSettingsBtn").addEventListener("click", () => {
      const lang = document.getElementById("defaultLang").value;
      const theme = document.getElementById("defaultTheme").value;
      DATA.settings = { lang, theme };
      saveData();
    });

    // Export / Import / Reset
    document.getElementById("exportBtn").addEventListener("click", () => {
      const blob = new Blob([JSON.stringify(DATA, null, 2)], { type: "application/json" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "peetham-data.json";
      a.click();
      URL.revokeObjectURL(a.href);
    });
    document.getElementById("importInput").addEventListener("change", (e) => {
      const file = e.target.files?.[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = () => {
        try {
          const json = JSON.parse(reader.result);
          DATA = { ...DEFAULTS, ...json };
          saveData();
          e.target.value = "";
          alert("Imported successfully");
        } catch {
          alert("Invalid JSON");
        }
      };
      reader.readAsText(file);
    });
    document.getElementById("resetBtn").addEventListener("click", () => {
      if (!confirm("Reset all data to defaults?")) return;
      DATA = { ...DEFAULTS };
      saveData();
    });

    // ----------------------- Lang/Theme Toggles -----------------------
    document.getElementById("langToggle").addEventListener("click", () => {
      DATA.settings = DATA.settings || {};
      DATA.settings.lang = DATA.settings.lang === "en" ? "ta" : "en";
      saveData();
    });
    document.getElementById("themeToggle").addEventListener("click", () => {
      const order = ["auto", "light", "dark"];
      const idx = order.indexOf(DATA.settings.theme || "auto");
      DATA.settings.theme = order[(idx + 1) % order.length];
      saveData();
    });

    // ----------------------- Helpers -----------------------
    function escapeHtml(str = "") {
      return str.replace(/[&<>"']/g, s => ({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[s]));
    }
    function slug(s="item") { return s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""); }
    function toLocalDatetime(iso) {
      if (!iso) return "";
      const d = new Date(iso);
      const pad = n => String(n).padStart(2,"0");
      return d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())+"T"+pad(d.getHours())+":"+pad(d.getMinutes());
    }
    function parseYouTubeId(url) {
      try {
        const u = new URL(url);
        if (u.hostname.includes("youtu.be")) return u.pathname.slice(1);
        const v = u.searchParams.get("v");
        if (v) return v;
        const parts = u.pathname.split("/");
        return parts[parts.length - 1];
      } catch { return url; }
    }
    function icsLink(ev) {
      const dt = new Date(ev.date);
      const dtStart = formatICS(dt);
      const dtEnd = formatICS(new Date(dt.getTime() + 90*60*1000));
      const body = [
        "BEGIN:VCALENDAR",
        "VERSION:2.0",
        "PRODID:-//SSASP//EN",
        "BEGIN:VEVENT",
        "UID:" + ev.id + "@ssasp",
        "DTSTAMP:" + formatICS(new Date()),
        "DTSTART:" + dtStart,
        "DTEND:" + dtEnd,
        "SUMMARY:" + escapeICS(ev.title || "Event"),
        "DESCRIPTION:" + escapeICS(ev.desc || ""),
        "END:VEVENT",
        "END:VCALENDAR"
      ].join("\r\n");
      return "data:text/calendar;charset=utf8," + encodeURIComponent(body);
    }
    function formatICS(d) {
      const pad = n => String(n).padStart(2,"0");
      return d.getUTCFullYear() + pad(d.getUTCMonth()+1) + pad(d.getUTCDate()) + "T" + pad(d.getUTCHours()) + pad(d.getUTCMinutes()) + "00Z";
    }
    function escapeICS(s="") { return s.replace(/\n/g,"\\n").replace(/,/g,"\\,").replace(/;/g,"\\;"); }

    // ----------------------- Init -----------------------
    renderAll();

    // Prefill Admin Settings UI
    document.getElementById("defaultLang").value = DATA.settings.lang || "en";
    document.getElementById("defaultTheme").value = DATA.settings.theme || "auto";
    document.getElementById("socialVideoUrlInput").value = DATA.social?.url || "";
    document.getElementById("socialVideoCaptionInput").value = DATA.social?.caption || "";
    document.getElementById("contactPhoneInput").value = DATA.contact?.phone || "";
    document.getElementById("contactWhatsInput").value = DATA.contact?.whatsapp || "9003356047";
    document.getElementById("contactLocationInput").value = DATA.contact?.locationText || "";
    document.getElementById("mapEmbedInput").value = DATA.contact?.mapEmbed || "";
    document.getElementById("consultationDaysInput").value = DATA.consultationDays || "";

    // Accessibility: close admin with Esc
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal.classList.contains("active")) closeAdmin();
    });

  </script>
</body>
</html>